import { getAllCourses } from "@/services/course";

import Navbar from "@/components/Navbar";
import Searchbar, { CourseSearchItem } from "@/components/Searchbar";
import { GetServerSideProps } from "next";
import Head from "next/head";

type HomeProps = {
  courses: CourseSearchItem[];
};

export const getStaticProps: GetServerSideProps<HomeProps> = async ({ params }) => {
  const courses = await getAllCourses();

  return {
    props: {
      courses: courses.map((course) => {
        return {
          course_code: course.course_code,
          course_name: course.course_name,
        };
      }),
    },
  };
};

const Home = ({ courses }: HomeProps) => {
  return (
    <>
      <Head>
        <title>Home | Western Rank</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main
        className={
          "min-h-screen items-center bg-[url('../public/College.svg'),_url('../public/College2.svg')] bg-[bottom_center,_bottom_right]"
        }
      >
        <Navbar courses={courses} className="z-10 bg-transparent" />
        <div className="flex flex-col gap-8 flex-grow w-screen max-w-[100vw] px-4 md:px-10 lg:px-20 xl:px-72 py-32 lg:py-42 relative">
          <h1 className="text-primary font-bold text-2xl md:text-3xl lg:text-4xl">
            Explore course reviews from <br />{" "}
            <span className="text-transparent bg-clip-text bg-gradient-to-br from-purple-600 to-blue-400">
              Western University
            </span>{" "}
            students
          </h1>
          <div className="relative group">
            <Searchbar courses={courses} />
            <div className="z-[-1] absolute inset-0.5 bg-opacity-1 bg-gradient-to-br from-purple-600 to-blue-400 rounded-lg blur-lg opacity-0 transition duration-1000 group-hover:opacity-70 group-focus-within:opacity-70 animate-tilt"></div>
          </div>
        </div>
        <div className="h-[40vh] w-[20vw] absolute bg-[radial-gradient(ellipse_at_bottom_left,_var(--tw-gradient-stops))] from-blue-800 via-purple-800 to-background bottom-1 left-1 blur-3xl opacity-20 animate-tilt"></div>
      </main>

      <footer></footer>
    </>
  );
};

export default Home;
